{% extends 'layout.html' %}

{% block body %}

<style>
  .capitalize{
    text-transform: capitalize;
  }

  .loading{
    text-align: center;
  }

  .panel {
    border-radius: 0px;
  }

  .card > .panel > .panel-heading{
    background-color: rgb(0, 102, 191)!important;

  }

  .action_bar{
    margin-bottom: 35px;
    padding-bottom: 40px;
  }

  .action_bar > .title{
    font-size: 24px;
  }

  .panel-title{
    color: rgb(255, 255, 255);
  }

  .row_key{
    font-weight: 600;
  }

  .row_val{
    text-align: center;
  }

  .main_card{
    border: none;
    box-shadow: 0 1px 1px rgba(0,0,0,0);
  }

  .main_card > .panel-body{
    box-shadow: 0 1px 1px rgba(0,0,0,0);
  }

  .module{
    font-size: 18px;
    font-weight: 600;
  }

</style>

<div class="panel panel-primary main_card">
  <div class="panel-heading action_bar">
    <div class="col-xs-9 title">Sensor Data</div>
    <div class="col-xs-3 btns">
      <button
        class="btn btn-success btn-md pull-right"
        ng-click="app.get_sensor_data()"
      >
        <span class="fa fa-refresh"></span>
        <span class="hidden-xs">Resfresh Data</span>
      </button>
    </div>
  </div>
  <div class="panel-body">
      <!-- loading spinner -->
      <div class="loading" ng-if="app.loading_sensor_data"><i class="fa fa-spinner fa-5x fa-spin" aria-hidden="true"></i></div>

      <!-- error message -->
      <div ng-if="app.loading_sensor_error">
        <div class="alert alert-danger" role="alert">Something went wrong.</div>
      </div>

      <div ng-if="!app.loading_sensor_data && !app.loading_sensor_error">
        <div class="card col-xs-12"
              ng-repeat="sensors in app.sensor_data">

          <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title module">Module: {[ sensors[0] ]}</h3>
              </div>
              <div class="panel-body">
                <div class="card col-xs-12 col-sm-6 col-md-4"
                      ng-repeat="sensor in sensors[1]">

                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h3 class="panel-title">Sensor: {[ sensor['pld_string'] ]}</h3>
                      </div>
                      <div class="panel-body">
                        <div class="sensor_data_row"
                             ng-repeat="key in app.ordered_key"
                             ng-if="sensor['sensor_data'][key] != undefined">
                          <!--(key, value) in sensor['sensor_data']-->
                             <div ng-class="key === 'gw_rssi' ? '' :  'capitalize'" class="row_key col-xs-5">{[ app.format_label(key) ]}</div>
                             <div class="row_val col-xs-7">{[ app.format_value(key, sensor['sensor_data'][key]) ]}</div>
                        </div>
                          
                      </div>
                    </div>
                </div>
              </div>
          </div>
        </div>
    </div>
  </div>
  </div>

{% endblock %}


{% block scripts %}

{% endblock %}